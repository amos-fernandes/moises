# üåê COMANDOS PARA VPS HOSTINGER - EXECU√á√ÉO MANUAL
# Execute estes comandos na sua VPS Hostinger via SSH

echo "üöÄ COMANDOS DOCKER PARA VPS HOSTINGER"
echo "============================================"
echo ""

echo "üìã PR√â-REQUISITOS:"
echo "1. Conectar na VPS via SSH"
echo "2. Navegar para o diret√≥rio do projeto"
echo "3. Garantir que Docker est√° instalado"
echo ""

echo "üîß INSTALAR DOCKER (se n√£o estiver instalado):"
echo "curl -fsSL https://get.docker.com -o get-docker.sh"
echo "sudo sh get-docker.sh"
echo "sudo usermod -aG docker \$USER"
echo ""

echo "üì¶ PASSO 1: PARAR E LIMPAR CONTAINERS"
echo "sudo docker stop neural-trading-api neural-dashboard neural-redis"
echo "sudo docker rm neural-trading-api neural-dashboard neural-redis"
echo "sudo docker rmi moises-neural-trading"
echo ""

echo "üî® PASSO 2: BUILD DA NOVA IMAGEM"
echo "sudo docker build -t moises-neural-trading ."
echo ""

echo "üöÄ PASSO 3: INICIAR CONTAINERS CORRIGIDOS"
echo ""
echo "# 1. Redis"
echo "sudo docker run -d --name neural-redis -p 6379:6379 redis:alpine"
echo ""

echo "# 2. Neural Trading API (com corre√ß√µes)"
echo "sudo docker run -d --name neural-trading-api \\"
echo "  -p 8001:8001 \\"
echo "  -v \"\$(pwd):/app\" \\"
echo "  -e PYTHONPATH=/app \\"
echo "  --link neural-redis:redis \\"
echo "  moises-neural-trading \\"
echo "  python app_neural_trading.py"
echo ""

echo "# 3. Dashboard"
echo "sudo docker run -d --name neural-dashboard \\"
echo "  -p 8501:8501 \\"
echo "  -v \"\$(pwd):/app\" \\"
echo "  -e PYTHONPATH=/app \\"
echo "  --link neural-redis:redis \\"
echo "  --link neural-trading-api:api \\"
echo "  moises-neural-trading \\"
echo "  streamlit run dashboard/main.py --server.port=8501 --server.address=0.0.0.0"
echo ""

echo "üß™ PASSO 4: TESTAR APIS"
echo "# Aguarde 30 segundos e execute:"
echo ""

echo "# Health Check (novo endpoint)"
echo "curl http://localhost:8001/health"
echo ""

echo "# Neural Status (corrigido)"  
echo "curl http://localhost:8001/api/neural/status"
echo ""

echo "# Neural Performance (corrigido)"
echo "curl http://localhost:8001/api/neural/performance"
echo ""

echo "# Dashboard (abrir no navegador)"
echo "# http://SEU_IP_VPS:8501"
echo ""

echo "üìã VERIFICAR LOGS SE NECESS√ÅRIO:"
echo "sudo docker logs neural-trading-api"
echo "sudo docker logs neural-dashboard"
echo "sudo docker ps"
echo ""

echo "üîß CONFIGURAR FIREWALL DA VPS:"
echo "# Liberar portas 8001 e 8501"
echo "sudo ufw allow 8001"
echo "sudo ufw allow 8501"
echo ""

echo "üåê ACESSAR DE FORA DA VPS:"
echo "# Substitua SEU_IP_VPS pelo IP real da sua VPS Hostinger"
echo "# API:       http://SEU_IP_VPS:8001"
echo "# Dashboard: http://SEU_IP_VPS:8501"
echo ""

echo "üéØ RESULTADO ESPERADO:"
echo "‚úÖ API funcionando em http://SEU_IP_VPS:8001"
echo "‚úÖ Health check respondendo em /health"
echo "‚úÖ Neural Status sem AttributeError"
echo "‚úÖ Dashboard funcionando em http://SEU_IP_VPS:8501"
echo "‚úÖ Sistema neural operacional (modo m√≠nimo)"
echo ""

echo "üöÄ TRANSFORMA√á√ÉO VPS COMPLETA:"
echo "‚ùå Estado anterior: -78% perdas + neural network falhando"
echo "‚úÖ Estado atual: VPS + Sistema containerizado + APIs funcionais + Base para 85% ganhos"